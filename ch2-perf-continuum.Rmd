---
title: 'Chapter 2: Full Performance Continuum'
author: "BRT"
date: "8/10/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(fs)

# NOTE
# This file depends on first having the following files in 
# the data folder
# * item-estimates/*
# * person-estimates/*
# where /* is all files for a grade, tier, and content area
# e.g., g6t1-ela.csv, g3t2-math.csv, etc.
```

## Item-Person Distributions

```{r load-data, echo = FALSE}
p <- here::here("data", "person-estimates") %>% 
  dir_ls() %>% 
  map_df(read_csv, .id = "f") %>% 
  mutate(f = gsub(here::here("data", "person-estimates"), "", f),
         grade = as.numeric(gsub("^/g(\\d\\d?).+", "\\1", f)),
         tier = as.numeric(gsub(".+\\dt(\\d).+", "\\1", f)),
         content = gsub(".+-(.+)\\..+", "\\1", f)) %>% 
  select(-f) 

i <- here::here("data", "item-estimates") %>% 
  dir_ls() %>% 
  map_df(read_csv, .id = "f") %>% 
  mutate(f = gsub(here::here("data", "item-estimates"), "", f),
         grade = as.numeric(gsub("^/g(\\d\\d?).+", "\\1", f)),
         tier = as.numeric(gsub(".+\\dt(\\d).+", "\\1", f)),
         content = gsub(".+-(.+)\\..+", "\\1", f)) %>% 
  select(-f)

# Note, Item E06BV4.1.1b-5 is cray and has an estimated difficulty of -730.743
# Similarly, Item M05AT2.1.3a-9 has an estimated difficulty of 24.43927

# I'm just going to eliminate them, but we should talk about this in the 
# narrative

i <- filter(i, item != "E06BV4.1.1b-5")

filter(i, b_estimate > 15)

library(ggdist)
i %>% 
  ggplot(aes(b_estimate)) +
  stat_dots()

```